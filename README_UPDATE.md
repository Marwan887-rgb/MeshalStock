# ๐ ุฏููู ุงุณุชุฎุฏุงู ูุธุงู ุงูุชุญุฏูุซ ุงูุฐูู

## ๐ฏ ูุง ุชู ุชุญุณูููุ

ุชู ุชุญุฏูุซ ูููุงุช ุฌูุจ ุงูุจูุงูุงุช ูุชุตุจุญ **ุฐููุฉ** ููุง ุชุนูุฏ ุชุญููู ูู ุงูุจูุงูุงุช ูู ูู ูุฑุฉ!

## โจ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ:

### 1. **ุชุญุฏูุซ ุฐูู (Smart Update)**
- โ ููุญุต ุงูููู ุงูููุฌูุฏ ูููุฑุฃ ุขุฎุฑ ุชุงุฑูุฎ
- โ ูุฌูุจ **ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ููุท** ูู ุฐูู ุงูุชุงุฑูุฎ
- โ ูุฏูุฌ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ูุน ุงููุฏููุฉ
- โ ูุฒูู ุงูุชูุฑุงุฑุงุช ุชููุงุฆูุงู
- โ ูููุฑ ุงูููุช ูุงูููุงุฑุฏ

### 2. **ุฅุญุตุงุฆูุงุช ููุตูุฉ**
ุงูุณูุฑุจุช ุงูุขู ูุนุฑุถ:
- ๐ ุนุฏุฏ ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงููููุดุฃุฉ
- ๐ ุนุฏุฏ ุงููููุงุช ุงูููุญุฏุซุฉ
- ๐ ุนุฏุฏ ุงููููุงุช ุงููุญุฏุซุฉ ูุณุจูุงู (ูุง ุญุงุฌุฉ ููุชุญุฏูุซ)
- ๐ ุนุฏุฏ ุงููููุงุช ุงููุงุดูุฉ
- ๐ ูุณุจุฉ ุงูุชูุฏู ุงููุฆููุฉ

### 3. **ููุทู ุฐูู ููุชูุงุฑูุฎ**
```
ููู ููุฌูุฏ โ ูุจุฏุฃ ูู ุขุฎุฑ ุชุงุฑูุฎ + 1 ููู
ููู ุฌุฏูุฏ โ ูุจุฏุฃ ูู 2020-01-01
ูุญุฏุซ ุจุงููุนู โ ูุชุฎุทู ููุง ูุฌูุจ ุดูุก
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู:

### ุงูุทุฑููุฉ 1: ุนุจุฑ ุงููุงุฌูุฉ (ุณููุฉ) โญ

1. ุดุบูู ุฎุงุฏู API:
```bash
python api_server.py
```

2. ุงูุชุญ ุงููุชุตูุญ ุนูู:
```
http://localhost:5000
```

3. ุงุถุบุท ุนูู **"ุชุญุฏูุซ ุงูุจูุงูุงุช"**
4. ุงุฎุชุฑ ุงูุณูู (ุณุนูุฏู ุฃู ุฃูุฑููู)
5. ุฑุงูุจ ุงูุชูุฏู ูู ุงููุงุฌูุฉ

---

### ุงูุทุฑููุฉ 2: ูุจุงุดุฑุฉ ุนุจุฑ ุงูุณูุฑุจุช

#### ุชุญุฏูุซ ุงูุณูู ุงูุณุนูุฏู:
```bash
python fetch_saudi_data.py
```

#### ุชุญุฏูุซ ุงูุณูู ุงูุฃูุฑููู:
```bash
python fetch_us_data.py
```

---

## ๐ ูุซุงู ุนูู ุงููุฎุฑุฌุงุช:

```
============================================================
๐ ุจุฏุก ุนูููุฉ ุชุญุฏูุซ ุจูุงูุงุช ุงูุฃุณูู ุงูุณุนูุฏูุฉ
============================================================
๐ ุชู ุงูุนุซูุฑ ุนูู 243 ุฑูุฒูุง
============================================================

--- ุงูุชูุฏู: 1/243 (0.4%) ---
๐ ูุนุงูุฌุฉ: 1120.SR
๐ ููู ููุฌูุฏ - ุขุฎุฑ ุชุงุฑูุฎ: 2024-11-22
๐ ุฌูุจ ุงูุจูุงูุงุช ูู 2024-11-23 ุญุชู ุงูููู...
๐ก ุฌุงุฑู ุงูุงุชุตุงู ุจู yfinance...
โ ุชู ุชุญุฏูุซ ุงูููู - ุฃุถูู 3 ุตู ุฌุฏูุฏ
๐ ุฅุฌูุงูู ุงูุจูุงูุงุช ุงูุขู: 256 ุตู
๐ ุงูุฅุญุตุงุฆูุงุช - ุฌุฏูุฏ: 0, ูุญุฏุซ: 1, ูุญุฏุซ ูุณุจูุงู: 0, ูุดู: 0

--- ุงูุชูุฏู: 2/243 (0.8%) ---
๐ ูุนุงูุฌุฉ: 2222.SR
๐ ููู ููุฌูุฏ - ุขุฎุฑ ุชุงุฑูุฎ: 2025-11-25
โ ุงูุจูุงูุงุช ูุญุฏุซุฉ ุจุงููุนู - ูุง ุญุงุฌุฉ ููุชุญุฏูุซ
๐ ุงูุฅุญุตุงุฆูุงุช - ุฌุฏูุฏ: 0, ูุญุฏุซ: 1, ูุญุฏุซ ูุณุจูุงู: 1, ูุดู: 0

...

============================================================
๐ ุงูุชูุช ุนูููุฉ ุชุญุฏูุซ ุงูุจูุงูุงุช!
============================================================
๐ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ:
   โ ูููุงุช ุฌุฏูุฏุฉ: 5
   โ ูููุงุช ูุญุฏุซุฉ: 180
   โ ูููุงุช ูุญุฏุซุฉ ุจุงููุนู: 55
   โ ูุดู: 3
   - ูุง ุชูุฌุฏ ุจูุงูุงุช ุฌุฏูุฏุฉ: 0
============================================================
```

---

## ๐ ููู ุญุงูุงุช ุงููููุงุช:

| ุงูุญุงูุฉ | ุงููุตู | ูุง ูุญุฏุซ |
|--------|--------|---------|
| **new** | ููู ุฌุฏูุฏ | ุฅูุดุงุก ููู ูุฌูุจ ุงูุจูุงูุงุช ูู 2020-01-01 |
| **updated** | ุชู ุงูุชุญุฏูุซ | ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ููููู ุงูููุฌูุฏ |
| **up_to_date** | ูุญุฏุซ ูุณุจูุงู | ุขุฎุฑ ุชุงุฑูุฎ ูู ุงููููุ ูุง ุญุงุฌุฉ ููุชุญุฏูุซ |
| **failed** | ูุดู | ุฎุทุฃ ูู ุงูุฌูุจ ุฃู ุงูุญูุธ |
| **no_new_data** | ูุง ุชูุฌุฏ ุจูุงูุงุช | yfinance ูู ูุนูุฏ ุฃู ุจูุงูุงุช ุฌุฏูุฏุฉ |

---

## ๐ก ูุตุงุฆุญ ูููุฉ:

### 1. **ุงูุชุญุฏูุซ ุงููููู ุงูุฃูู**
ุนูุฏ ุชุดุบูู ุงูุณูุฑุจุช ูุฃูู ูุฑุฉ ุงูููู:
- โ ุณูุฌูุจ ุงูุจูุงูุงุช ูู ุขุฎุฑ ุชุงุฑูุฎ ุญุชู ุงูููู
- โ ูุฏ ูุณุชุบุฑู ููุชุงู ุญุณุจ ุนุฏุฏ ุงูุฃูุงู
- โ ุณูููู ุฃุณุฑุน ุจูุซูุฑ ูู ุฅุนุงุฏุฉ ุชุญููู ูู ุดูุก

### 2. **ุงูุชุญุฏูุซุงุช ุงููุงุญูุฉ ูู ููุณ ุงูููู**
- โ ุณูุชุฎุทู ูุนุธู ุงููููุงุช (ูุญุฏุซุฉ ูุณุจูุงู)
- โ ุณุฑูุน ุฌุฏุงู!

### 3. **ุงููููุงุช ุงูุฌุฏูุฏุฉ**
- โ ูุฌูุจ ุงูุจูุงูุงุช ูู 2020-01-01
- โ ููููู ุชุบููุฑ `DEFAULT_START_DATE` ูู ุงูุณูุฑุจุช

### 4. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
- โ ุฅุฐุง ูุดู ุณูู ูุนููุ ูุณุชูุฑ ูู ุงูุจููุฉ
- โ ูุณุฌู ูู ุดูุก ูู ุงูู LOG files
- โ ุชุญูู ูู: `saudi_data_fetch.log` ุฃู `us_data_fetch.log`

---

## ๐ ุจููุฉ ุงููููุงุช:

```
MeshalStock/
โโโ fetch_saudi_data.py        # ุณูุฑุจุช ุงูุชุญุฏูุซ ุงูุณุนูุฏู ๐ธ๐ฆ
โโโ fetch_us_data.py            # ุณูุฑุจุช ุงูุชุญุฏูุซ ุงูุฃูุฑููู ๐บ๐ธ
โโโ api_server.py               # ุฎุงุฏู API
โโโ symbols_sa.txt              # ุฑููุฒ ุงูุฃุณูู ุงูุณุนูุฏูุฉ (243)
โโโ sp500_tickers.csv           # ุฑููุฒ ุงูุฃุณูู ุงูุฃูุฑูููุฉ (507)
โโโ data_sa/                    # ุจูุงูุงุช ุงูุฃุณูู ุงูุณุนูุฏูุฉ
โ   โโโ 1120.SR.csv
โ   โโโ 2222.SR.csv
โ   โโโ ...
โโโ data_us/                    # ุจูุงูุงุช ุงูุฃุณูู ุงูุฃูุฑูููุฉ
โ   โโโ AAPL.csv
โ   โโโ MSFT.csv
โ   โโโ ...
โโโ saudi_data_fetch.log        # ุณุฌู ุงูุณุนูุฏูุฉ
โโโ us_data_fetch.log           # ุณุฌู ุฃูุฑููุง
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### ูุง ุชูุฌุฏ ุจูุงูุงุช ุฌุฏูุฏุฉุ
```
ุงูุณุจุจ: ูุฏ ูููู ุงูุณูู ูุบููุงู (ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุนุ ุนุทูุฉ ุฑุณููุฉ)
ุงูุญู: ุงูุชุธุฑ ููู ุงูุชุฏุงูู ุงูุชุงูู
```

### ุฎุทุฃ ูู ุงูุงุชุตุงู ุจู yfinanceุ
```
ุงูุณุจุจ: ูุดููุฉ ูู ุงูุฅูุชุฑูุช ุฃู yfinance ูุนุทู ูุคูุชุงู
ุงูุญู: 
  1. ุชุญูู ูู ุงูุฅูุชุฑูุช
  2. ุญุงูู ูุฑุฉ ุฃุฎุฑู ุจุนุฏ ุฏูุงุฆู
  3. ุชุญูู ูู ุชุญุฏูุซ yfinance: pip install --upgrade yfinance
```

### ูููุงุช ูุงุดูุฉ ูุซูุฑุฉุ
```
ุงูุณุจุจ: ูุฏ ุชููู ุจุนุถ ุงูุฑููุฒ ุบูุฑ ุตุญูุญุฉ ุฃู ูุนููุฉ
ุงูุญู: ุชุญูู ูู ุงูู LOG file ููุชูุงุตูู
```

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงููุชูุฏูุฉ:

### ุชุบููุฑ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ุงูุงูุชุฑุงุถู:
ูู `fetch_saudi_data.py` ุฃู `fetch_us_data.py`:
```python
DEFAULT_START_DATE = '2020-01-01'  # ุบููุฑ ูุฐุง ุงูุณุทุฑ
```

### ุชุบููุฑ ุฒูู ุงูุชุฃุฎูุฑ ุจูู ุงูุทูุจุงุช:
```python
time.sleep(1)  # ุบููุฑ ูู 1 ุฅูู 2 ุฃู 0.5 ุซุงููุฉ
```

---

## ๐ ุงูุฏุนู:

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู ุงูู LOG files
2. ุชุฃูุฏ ูู ุชุซุจูุช ุงูููุชุจุงุช: `pip install -r requirements.txt`
3. ุฌุฑุจ ุงูุงุฎุชุจุงุฑ: `python test_update.py`

---

## ๐ ุงูุฎูุงุตุฉ:

ุงูุณูุฑุจุชุงุช ุงูุขู **ุฐููุฉ** ู**ูุนุงูุฉ** ู**ุณุฑูุนุฉ**!
- โ ูุง ุฅุนุงุฏุฉ ุชุญููู ุบูุฑ ุถุฑูุฑูุฉ
- โ ุชุญุฏูุซุงุช ููููุฉ ุณุฑูุนุฉ
- โ ุชูููุฑ ุงูููุช ูุงูููุงุฑุฏ
- โ ุฅุญุตุงุฆูุงุช ููุตูุฉ

**ุงุณุชูุชุน ุจุงูุชุญุฏูุซุงุช ุงูุฐููุฉ! ๐**
